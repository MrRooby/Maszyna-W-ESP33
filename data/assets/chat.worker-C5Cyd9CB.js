(function(){"use strict";self.onmessage=async a=>{const{history:r,aiIndex:t}=a.data;try{const e=(await(await fetch("https://real-large-cricket.ngrok-free.app/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({history:r})})).json()).response||"[AI did not return a response]";for(let s=0;s<e.length;s++)self.postMessage({aiIndex:t,char:e[s]}),await new Promise(i=>setTimeout(i,20));self.postMessage({aiIndex:t,done:!0})}catch{const o="⚠️ Failed to get response from AI.";for(let e=0;e<o.length;e++)self.postMessage({aiIndex:t,char:o[e]}),await new Promise(s=>setTimeout(s,40));self.postMessage({aiIndex:t,done:!0})}}})();
